name: æ¯æ—¥æ–°èæ™¨å ±æ¨æ’­ (Daily News Bot)

on:
  schedule:
    # é€™è£¡ä½¿ç”¨çš„æ˜¯ UTC æ™‚é–“ï¼å°ç£æ™‚é–“ (UTC+8) çš„æ—©ä¸Š 09:00ï¼Œç­‰æ–¼ UTC çš„ 01:00
    - cron: '15 2 * * *'
  workflow_dispatch: 

jobs:
  run-news-bot:
    runs-on: ubuntu-latest # ä½¿ç”¨æœ€æ–°çš„ Linux é›²ç«¯è™›æ“¬æ©Ÿ

    steps:
      - name: ğŸ“¥ å–å¾—ç¨‹å¼ç¢¼
        uses: actions/checkout@v4

      - name: ğŸ è¨­å®š Python ç’°å¢ƒ
        uses: actions/setup-python@v4
        with:
          python-version: '3.12.3' # è¨­å®š Python ç‰ˆæœ¬

      - name: ğŸ“¦ å®‰è£å¿…å‚™å¥—ä»¶
        run: |
          python -m pip install --upgrade pip
          pip install -r requirements.txt

      - name: ğŸš€ åŸ·è¡Œæ–°èçˆ¬èŸ²èˆ‡æ¨æ’­è…³æœ¬
        env:
          # å°‡å‰›å‰›è¨­å®šçš„ Secrets æå–å‡ºä¾†ç•¶ä½œç’°å¢ƒè®Šæ•¸
          OPENAI_API_KEY: ${{ secrets.OPENAI_API_KEY }}
          DISCORD_WEBHOOK_URL: ${{ secrets.DISCORD_WEBHOOK_URL }}
        # è¨˜å¾—ç¢ºèªé€™è£¡çš„æª”åè·Ÿä½ çš„ Python æª”åå®Œå…¨ä¸€è‡´ (é€™è£¡å‡è¨­æ˜¯ dailynews.py)
        run: python dailynews.py
